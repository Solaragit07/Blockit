<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Button Functions - BlockIt</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div class="container mt-5">
        <h2>Test Button Functions</h2>
        
        <div class="card mt-4">
            <div class="card-body">
                <h5>Test Device: iPhone 12</h5>
                <p><strong>MAC:</strong> AA:BB:CC:DD:EE:FF</p>
                <p><strong>IP:</strong> 192.168.10.100</p>
                
                <div class="btn-group" role="group">
                    <button class="btn btn-success" onclick="testAddProfile()">
                        Test Add Profile
                    </button>
                    <button class="btn btn-danger" onclick="testBlockDevice()">
                        Test Block Device
                    </button>
                    <button class="btn btn-warning" onclick="testLimitBandwidth()">
                        Test Limit Bandwidth
                    </button>
                    <button class="btn btn-primary" onclick="testSetTimeLimit()">
                        Test Set Time Limit
                    </button>
                </div>
            </div>
        </div>
        
        <div class="card mt-4">
            <div class="card-body">
                <h5>Test Results</h5>
                <div id="testResults" class="alert alert-info" style="display: none;"></div>
            </div>
        </div>
    </div>

    <script>
        const testMAC = 'AA:BB:CC:DD:EE:FF';
        const testDeviceName = 'iPhone 12';
        const testIP = '192.168.10.100';
        
        function showResult(message, isSuccess = true) {
            const resultsDiv = document.getElementById('testResults');
            resultsDiv.className = `alert ${isSuccess ? 'alert-success' : 'alert-danger'}`;
            resultsDiv.innerHTML = message;
            resultsDiv.style.display = 'block';
        }
        
        function testAddProfile() {
            $.ajax({
                url: 'add_device_profile.php',
                type: 'POST',
                data: {
                    mac_address: testMAC,
                    device_name: testDeviceName,
                    ip_address: testIP
                },
                success: function(response) {
                    try {
                        const result = JSON.parse(response);
                        showResult(`Add Profile Test: ${result.message}`, result.status === 'success');
                        if (result.status === 'success') {
                            Swal.fire('Success!', 'Device added to profile', 'success');
                        }
                    } catch (e) {
                        showResult('Add Profile Test: Invalid server response', false);
                    }
                },
                error: function() {
                    showResult('Add Profile Test: Server error', false);
                }
            });
        }
        
        function testBlockDevice() {
            $.ajax({
                url: 'block_unknown_device.php',
                type: 'POST',
                data: {
                    mac_address: testMAC,
                    device_name: testDeviceName,
                    action: 'block'
                },
                success: function(response) {
                    try {
                        const result = JSON.parse(response);
                        showResult(`Block Device Test: ${result.message}`, result.status === 'success');
                        if (result.status === 'success') {
                            Swal.fire('Success!', 'Device blocked', 'success');
                        }
                    } catch (e) {
                        showResult('Block Device Test: Invalid server response', false);
                    }
                },
                error: function() {
                    showResult('Block Device Test: Server error', false);
                }
            });
        }
        
        function testLimitBandwidth() {
            $.ajax({
                url: 'limit_bandwidth.php',
                type: 'POST',
                data: {
                    mac_address: testMAC,
                    device_name: testDeviceName,
                    download_limit: 10,
                    upload_limit: 5
                },
                success: function(response) {
                    try {
                        const result = JSON.parse(response);
                        showResult(`Limit Bandwidth Test: ${result.message}`, result.status === 'success');
                        if (result.status === 'success') {
                            Swal.fire('Success!', 'Bandwidth limited', 'success');
                        }
                    } catch (e) {
                        showResult('Limit Bandwidth Test: Invalid server response', false);
                    }
                },
                error: function() {
                    showResult('Limit Bandwidth Test: Server error', false);
                }
            });
        }
        
        function testSetTimeLimit() {
            $.ajax({
                url: 'set_time_limit.php',
                type: 'POST',
                data: {
                    mac_address: testMAC,
                    hostname: testDeviceName,
                    time_limit: 60
                },
                success: function(response) {
                    try {
                        const result = JSON.parse(response);
                        showResult(`Set Time Limit Test: ${result.message}`, result.status === 'success');
                        if (result.status === 'success') {
                            Swal.fire('Success!', 'Time limit set', 'success');
                        }
                    } catch (e) {
                        showResult('Set Time Limit Test: Invalid server response', false);
                    }
                },
                error: function() {
                    showResult('Set Time Limit Test: Server error', false);
                }
            });
        }
    </script>
</body>
</html>
